/* === mobile-fixes.css ===
   Patch overrides for mobile/tablet jitter & layout issues.
   Load this AFTER your existing app.min.css.
*/

/* 1) Stabilize section heights (vh -> svh) and reduce hero jank */
.mainVisual {
  height: 100svh !important;
}

.indulge {
  height: 100svh !important;
}

.bestSeller {
  height: 100svh !important;
}

/* If you had other sections using vh, keep them stable too */
.reviewMarquee,
.track {
  height: 80svh !important;
}

/* Hero image smoothing */
.mainVisual .hero img,
.mainVisual .hero picture,
.mainVisual .hero video {
  backface-visibility: hidden;
  transform: translateZ(0);
  will-change: transform;
}

/* 2) Best Seller cards: fix circle height fluctuations */
.circle {
  height: clamp(420px, 62svh, 640px) !important;
}

@media (max-width: 1080px) {
  .circle {
    height: clamp(320px, 42svh, 520px) !important;
  }
}

/* 4) Logo background center alignment for responsive (tablet/mobile) */
@media (max-width: 1080px) {
  .site-header h1.logo {
    padding-right: 0 !important;
  }

  .site-header h1.logo a {
    position: relative !important;
    display: grid !important;
    place-items: center !important;
    width: clamp(160px, 28vw, 240px) !important;
    height: clamp(36px, 7.2vw, 56px) !important;
    border-radius: 10px !important;
    background: var(--nav-bg, #f8f8f2) !important;
    overflow: hidden !important;
  }

  .site-header .logo-img {
    position: absolute !important;
    inset: 0 !important;
    /* center both logos exactly */
    margin: auto !important;
    width: 80% !important;
    height: auto !important;
    object-fit: contain !important;
  }

  .site-header .logo-dark {
    opacity: 0;
    /* default hidden; reveal via existing logic if any */
    inset: 0 !important;
    /* remove previous off-center inset */
    background: transparent !important;
  }
}

@media (max-width:468px) {
  .mainVisual {
    height: 100%;
    min-height: 100%;
  }

  .mainVisual .hero {
    height: 100%;
  }

  .mainVisual .hero img {
    height: 100%;
    object-fit: cover;
  }
}
/* === HERO: Android Chrome縮み対策 (2025-11-02) === */
:root{ --vh0: 100; } /* JSで初期化されるまでの保険 */

@media (max-width: 768px) {
  /* fallback: 初期ロード時のinnerHeightを固定的に使う（--vh0 は px単位で使う） */
  .mainVisual,
  .mainVisual .hero {
    height: calc(var(--vh0, 100) * 1px) !important;
    min-height: calc(var(--vh0, 100) * 1px) !important;
  }
  .mainVisual .hero img,
  .mainVisual .hero picture,
  .mainVisual .hero video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
}

/* Chromeがlvh対応なら、それを最優先で使う（スクロールで縮まない） */
@supports (height: 100lvh) {
  @media (max-width: 768px) {
    .mainVisual,
    .mainVisual .hero {
      height: 100lvh !important;
      min-height: 100lvh !important;
    }
  }
}

/* === HERO iOS Chrome hard lock (2025-11-02) === */
:root{ --vh0: 100; } /* JSで上書きする固定値 */

@media (max-width: 768px) {
  .mainVisual,
  .mainVisual .hero {
    height: calc(var(--vh0) * 1px) !important;
    min-height: calc(var(--vh0) * 1px) !important;
  }
  .mainVisual .hero img,
  .mainVisual .hero picture,
  .mainVisual .hero video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
}

/* Chromeが lvh を持つ端末はそちらを優先（iOS 17+） */
@supports (height: 100lvh) {
  @media (max-width: 768px) {
    .mainVisual,
    .mainVisual .hero {
      height: 100lvh !important;
      min-height: 100lvh !important;
    }
  }
}

@media (max-width: 768px) {
  .mainVisual,
  .mainVisual .hero {
    height: auto !important;
    min-height: 0 !important;
  }
  .mainVisual { padding: 0 !important; }
  .mainVisual .hero img,
  .mainVisual .hero picture,
  .mainVisual .hero video {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover;
    display: block;
  }
}
